# Policy for deterministic change risk classification + ISO/IEC 20000 change-control checks.
policy_version: "2026-01-30"
policy_id: "iso20000-change-policy"
owner: "platform-team"
description: >
  Deterministic + AI-assisted change risk classification + ISO/IEC 20000 change-control checks.

risk_levels:
  LOW:
    description: "Low risk change"
    change_types: []

  HIGH:
    description: "High risk change"
    change_types:
      - id: "db"
        description: "Database changes"
        path_patterns:
          - "alembic/migrations/**"
          - "app/db/**"
          - "app/models/**"

      - id: "config"
        description: "Configuration changes"
        path_patterns:
          - "app/config/**"

      - id: "auth"
        description: "Authentication changes"
        path_patterns:
          - "app/auth/**"

      - id: "api"
        description: "API changes"
        path_patterns:
          - "app/api/**"

      - id: "infra"
        description: "Infrastructure changes"
        path_patterns:
          - "infra/**"
          - "Dockerfile"
          - "docker-compose.yaml"
          - ".dockerignore"
          - ".env"
          - ".env.example"

      - id: "tier0_services"
        description: "Tier 0 service changes"
        services:
          - id: "payment-service"
            description: "Payment service"
          - id: "user-service"
            description: "User service including registration, login, profile"
        analysis:
          method: "llm+greptile"
          effect: "warn_only"
